#:kivy 1.10.1
#:import Clock kivy.clock.Clock
#:import Window kivy.core.window.Window
#:import Animation kivy.animation.Animation
#:import ProgressBar kivy.uix.progressbar.ProgressBar


<LandingScreen>:
    Button:
        background_color: (0.0, 0.0, 0.0, 0.0)
        on_release: app.root.current = 'folder_select'

    Image:
        allow_stretch: True
        keep_ratio: True
        pos_hint: {'center_x': 0.5, 'center_y': 0.60}
        size_hint_y: None
        height: dp(350)
        source: 'assets/color_bird.png'

    Label:
        pos_hint: {'center_x': 0.5, 'center_y': 0.2}
        font_size: 120
        font_name: 'assets/Montserrat-Regular'
        text: 'K N E S T'

<FolderSelectScreen>:
    on_leave: self.ids.path.text = "Please choose a directory"

    Label:
        id: caption
        text: "REDUCE SIMILARITY"
        halign: 'center'
        valign: 'middle'
        font_name: 'assets/Montserrat-Regular'
        font_size: 20
        pos_hint: {'center_x': .85, 'center_y': .91}

    Switch:
        id: choice
        size_hint_x: None
        size_hint_y: None
        # actual size of built-in kivy switch image
        size_x: 83
        size_y: 32
        pos_hint: {'center_x': .85, 'center_y': .87}
        on_active: root.update_toggle()

    Button:
        text: 'X'
        font_name: 'assets/Montserrat-Regular'
        background_normal: ''
        background_color: (0.0, 0.0, 0.0, 0.0)
        size_hint: (.02, .03)
        pos_hint: {'center_x': .035, 'center_y': .967}
        halign: 'center'
        valign: 'middle'
        on_press: app.stop()

    Button:
        text: 'â€”'
        font_name: 'assets/Montserrat-Regular'
        background_normal: ''
        background_color: (0.0, 0.0, 0.0, 0.0)
        size_hint: (.02, .02)
        pos_hint: {'center_x': .065, 'center_y': .9695}
        halign: 'center'
        valign: 'middle'
        on_press: Window.minimize()

    BoxLayout:
        orientation: 'vertical'

        Label:
        	id: title
            font_size: 100
            font_name: 'assets/Montserrat-Regular'
            text: "K N E S T"

        Image:
            size: self.size
            source: 'assets/color_bird.png'          

        Label:
        	id: path
        	font_size: 50
            font_name: 'assets/Montserrat-Regular'
        	text: 'Please choose a directory'
            text_size: self.size
            halign: 'center'
            valign: 'middle'

        BoxLayout:
            orientation: 'horizontal'
            pos_hint: {'center_x': .5, 'bottom': 1}
            size_hint_y: None
            height: 120

            Button:
                text: "Choose Folder"
                font_name: 'assets/Montserrat-Regular'
                on_release: root.show_load()

            Button:
                text: "Start"
                font_name: 'assets/Montserrat-Regular'
                on_release: root.check_path()

<BlackScreen1>:
    on_enter: Clock.schedule_once(root.switch, 1.5)

    Button:
        text: 'X'
        background_normal: ''
        background_color: (0.0, 0.0, 0.0, 0.0)
        size_hint: (.02, .03)
        font_name: 'assets/Montserrat-Regular'
        pos_hint: {'center_x': .035, 'center_y': .967}
        halign: 'center'
        valign: 'middle'
        on_press: app.stop()

    Button:
        text: '__'
        background_normal: ''
        background_color: (0.0, 0.0, 0.0, 0.0)
        size_hint: (.02, .025)
        font_name: 'assets/Montserrat-Regular'
        pos_hint: {'center_x': .065, 'center_y': .975}
        halign: 'center'
        valign: 'middle'
        on_press: Window.minimize()

<ProgressScreen>:
    on_enter: Clock.schedule_once(root.switch, 3)

    Button:
        text: 'X'
        background_normal: ''
        background_color: (0.0, 0.0, 0.0, 0.0)
        size_hint: (.02, .03)
        font_name: 'assets/Montserrat-Regular'
        pos_hint: {'center_x': .035, 'center_y': .967}
        halign: 'center'
        valign: 'middle'
        on_press: app.stop()

    Button:
        text: '__'
        background_normal: ''
        background_color: (0.0, 0.0, 0.0, 0.0)
        size_hint: (.02, .025)
        font_name: 'assets/Montserrat-Regular'
        pos_hint: {'center_x': .065, 'center_y': .975}
        halign: 'center'
        valign: 'middle'
        on_press: Window.minimize()

    Image:
        id: image
        pos_hint: {'center_x': 0.5, 'center_y': 0.5}
        size_hint_y: None  # Tells the layout to ignore the size_hint in y dir
        height: dp(200)  # The fixed height you want
        source: 'assets/color_bird.png'

<BlackScreen2>:
    on_enter: Clock.schedule_once(root.switch, 2)

    Button:
        text: 'X'
        background_normal: ''
        background_color: (0.0, 0.0, 0.0, 0.0)
        size_hint: (.02, .03)
        font_name: 'assets/Montserrat-Regular'
        pos_hint: {'center_x': .035, 'center_y': .967}
        halign: 'center'
        valign: 'middle'
        on_press: app.stop()

    Button:
        text: '__'
        background_normal: ''
        background_color: (0.0, 0.0, 0.0, 0.0)
        size_hint: (.02, .025)
        font_name: 'assets/Montserrat-Regular'
        pos_hint: {'center_x': .065, 'center_y': .975}
        halign: 'center'
        valign: 'middle'
        on_press: Window.minimize()

<ProcessScreen>:
    on_enter: Clock.schedule_interval(root.update, 0)
    on_leave: self.ids.image.source = ''
    on_leave: self.ids.image.color = (0.0, 0.0, 0.0, 0.0)
    on_leave: self.ids.result.source = ''
    on_leave: self.ids.result.color = (0.0, 0.0, 0.0, 0.0)
    on_leave: self.ids.message.text = ''

    Button:
        text: 'X'
        background_normal: ''
        background_color: (0.0, 0.0, 0.0, 0.0)
        size_hint: (.02, .03)
        font_name: 'assets/Montserrat-Regular'
        pos_hint: {'center_x': .035, 'center_y': .967}
        halign: 'center'
        valign: 'middle'
        on_press: app.stop()

    Button:
        text: '__'
        background_normal: ''
        background_color: (0.0, 0.0, 0.0, 0.0)
        size_hint: (.02, .025)
        font_name: 'assets/Montserrat-Regular'
        pos_hint: {'center_x': .065, 'center_y': .975}
        halign: 'center'
        valign: 'middle'
        on_press: Window.minimize()

    Label:
        id: message
        pos_hint: {'center_x': 0.5, 'center_y': 0.2}
        font_size: 50
        font_name: 'assets/Montserrat-Regular'
        text: ''

    Image:
        id: image
        pos_hint: {'center_x': 0.5, 'center_y': 0.5}
        size_hint_x: None  # Tells the layout to ignore the size_hint in y dir
        size_hint_y: None
        width: dp(400) # The fixed width you want
        height: dp(300)
        color: (0.0, 0.0, 0.0, 0.0)
        source: ''

    Image:
        id: result
        pos_hint: {'center_x': 0.5, 'center_y': 0.5}
        size_hint_y: None  # Tells the layout to ignore the size_hint in y dir
        height: dp(200)  # The fixed height you want
        color: (0.0, 0.0, 0.0, 0.0)
        source: ''

<CompareScreen>:
    on_enter: Clock.schedule_interval(root.compare, 0)
    on_leave: self.ids.progress.value = 0
    on_leave: self.ids.loading.text = ''

    Button:
        text: 'X'
        background_normal: ''
        background_color: (0.0, 0.0, 0.0, 0.0)
        size_hint: (.02, .03)
        font_name: 'assets/Montserrat-Regular'
        pos_hint: {'center_x': .035, 'center_y': .967}
        halign: 'center'
        valign: 'middle'
        on_press: app.stop()

    Button:
        text: '__'
        background_normal: ''
        background_color: (0.0, 0.0, 0.0, 0.0)
        size_hint: (.02, .025)
        font_name: 'assets/Montserrat-Regular'
        pos_hint: {'center_x': .065, 'center_y': .975}
        halign: 'center'
        valign: 'middle'
        on_press: Window.minimize()

    Label:
        id: message
        font_size: 75
        pos_hint: {'center_x': 0.5, 'center_y': 0.8}
        font_name: 'assets/Montserrat-Regular'
        text: 'Comparing Images'

    ProgressBar:
        id: progress
        pos_hint: {'center_x': 0.5, 'center_y': 0.5}

    Label:
        id: loading
        font_size: 45
        pos_hint: {'center_x': 0.5, 'center_y': 0.45}
        font_name: 'assets/Montserrat-Regular'
        text: ''


<BlackScreen3>:
    on_enter: Clock.schedule_once(root.switch, 1)

    Button:
        text: 'X'
        background_normal: ''
        background_color: (0.0, 0.0, 0.0, 0.0)
        size_hint: (.02, .03)
        font_name: 'assets/Montserrat-Regular'
        pos_hint: {'center_x': .035, 'center_y': .967}
        halign: 'center'
        valign: 'middle'
        on_press: app.stop()

    Button:
        text: '__'
        background_normal: ''
        background_color: (0.0, 0.0, 0.0, 0.0)
        size_hint: (.02, .025)
        font_name: 'assets/Montserrat-Regular'
        pos_hint: {'center_x': .065, 'center_y': .975}
        halign: 'center'
        valign: 'middle'
        on_press: Window.minimize()

<WriteScreen>:
    on_enter: Clock.schedule_interval(root.begin, 0)
    on_leave: self.ids.progress.value = 0
    on_leave: self.ids.loading.text = ''

    Button:
        text: 'X'
        background_normal: ''
        background_color: (0.0, 0.0, 0.0, 0.0)
        size_hint: (.02, .03)
        font_name: 'assets/Montserrat-Regular'
        pos_hint: {'center_x': .035, 'center_y': .967}
        halign: 'center'
        valign: 'middle'
        on_press: app.stop()

    Button:
        text: '__'
        background_normal: ''
        background_color: (0.0, 0.0, 0.0, 0.0)
        size_hint: (.02, .025)
        font_name: 'assets/Montserrat-Regular'
        pos_hint: {'center_x': .065, 'center_y': .975}
        halign: 'center'
        valign: 'middle'
        on_press: Window.minimize()

    Label:
        id: message
        font_size: 75
        pos_hint: {'center_x': 0.5, 'center_y': 0.8}
        font_name: 'assets/Montserrat-Regular'
        text: 'Writing to Subdirectory...'

    ProgressBar:
        id: progress
        pos_hint: {'center_x': 0.5, 'center_y': 0.5}

    Label:
        id: loading
        font_size: 45
        pos_hint: {'center_x': 0.5, 'center_y': 0.45}
        font_name: 'assets/Montserrat-Regular'
        text: ''


<BlackScreen4>:
    on_enter: Clock.schedule_once(root.switch, 1)

    Button:
        text: 'X'
        background_normal: ''
        background_color: (0.0, 0.0, 0.0, 0.0)
        size_hint: (.02, .03)
        font_name: 'assets/Montserrat-Regular'
        pos_hint: {'center_x': .035, 'center_y': .967}
        halign: 'center'
        valign: 'middle'
        on_press: app.stop()

    Button:
        text: '__'
        background_normal: ''
        background_color: (0.0, 0.0, 0.0, 0.0)
        size_hint: (.02, .025)
        font_name: 'assets/Montserrat-Regular'
        pos_hint: {'center_x': .065, 'center_y': .975}
        halign: 'center'
        valign: 'middle'
        on_press: Window.minimize()

<EndScreen>:
    Button:
        background_color: (0.0, 0.0, 0.0, 0.0)
        on_release: app.root.current = 'folder_select'

    Button:
        text: 'X'
        background_normal: ''
        background_color: (0.0, 0.0, 0.0, 0.0)
        size_hint: (.02, .03)
        font_name: 'assets/Montserrat-Regular'
        pos_hint: {'center_x': .035, 'center_y': .967}
        halign: 'center'
        valign: 'middle'
        on_press: app.stop()

    Button:
        text: '__'
        background_normal: ''
        background_color: (0.0, 0.0, 0.0, 0.0)
        size_hint: (.02, .025)
        font_name: 'assets/Montserrat-Regular'
        pos_hint: {'center_x': .065, 'center_y': .975}
        halign: 'center'
        valign: 'middle'
        on_press: Window.minimize()

    BoxLayout:
        orientation: 'vertical'

        Label:
            id: message
            font_size: 75
            font_name: 'assets/Montserrat-Regular'
            text: 'P R O C E S S   C O M P L E T E'

        Image:
            id: image
            pos_hint: {'center_x': 0.5, 'center_y': 0.5}
            size_hint_y: None  # Tells the layout to ignore the size_hint in y dir
            height: dp(200)  # The fixed height you want
            source: 'assets/gray_bird.png'

        Label:
            id: continue
            font_size: 45
            font_name: 'assets/Montserrat-Regular'
            text: 'Click Anywhere to Continue'

<LoadDialog>:
    BoxLayout:
		size: root.size
        pos: root.pos
        orientation: 'vertical'

        FileChooserIconView:
            id: filechooser
            dirselect: True

        BoxLayout:
            size_hint_y: None
            height: 70
            
            Button:
                text: 'Cancel'
                font_name: 'assets/Montserrat-Regular'
                on_release: root.cancel()

            Button:
                text: 'Load'
                font_name: 'assets/Montserrat-Regular'
                on_release: root.load(filechooser.path, filechooser.selection)